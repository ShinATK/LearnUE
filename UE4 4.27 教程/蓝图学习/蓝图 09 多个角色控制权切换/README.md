
- [【蓝图】09课：多个角色控制权切换\_哔哩哔哩\_bilibili](https://www.bilibili.com/video/BV164411Y732?t=94.2&p=43)
---
几个节点：
![](img/Pasted%20image%2020240116160549.png)

几个关键点：
- 镜头切换
- 控制权切换
- multigate 

区分下面：
- **重叠节点**
- **重叠到宏**
- **重叠到函数**：不能有流程控制，不能有时间相关

# 实现角色控制权切换

三种方法

## 方法一

选中角色，注意是选中蓝图类而不是模型
- 细节面板中输入“possess”
![](img/Pasted%20image%2020240116162553.png)

## 方法二

将原场景中的角色和角色出生点删除干净，从左侧放置面板找到玩家出生点，拖到指定位置


## 方法三

通过按键切换

- 世界大纲面板选中要切换的角色们，拖到关卡蓝图中，形成节点
![](img/Pasted%20image%2020240116162726.png)
![](img/Pasted%20image%2020240116162759.png)

**目标**
- 按键“1”切换多个角色控制权
	- 需要节点
		- multigate
		- get player controller
		- possess
- 设定角色切换过程镜头的过渡
	- 需要节点
		- set view target with blend
		- delay

**节点连接**
![](img/Pasted%20image%2020240116163114.png)
**注意的点**
- 角色切换时的镜头过渡和切换角色控制权存在冲突
	- 镜头过渡需要时间
	- 控制权切换是即时完成
	- 所以需要调整节点顺序，并设置 delay
		- 图中 Blend 设置镜头过渡为 2 秒完成
		- 所以需要延迟 2 秒再执行 possess 完成控制权切换
**提高鲁棒性**
- 如果镜头切换过程中输入“1”可能导致镜头切换动画未完成就需要切换到下一个目标
	- 程序容易出现问题
- 所以要判断当前动画是否完成，设置 bool 变量用以判断
![](img/Pasted%20image%2020240116163842.png)
- 在切换完毕后设置为真
![](img/Pasted%20image%2020240116163908.png)
**避免冗余和重复**
- 重叠到函数：不能有时间和流程控制相关
- *重叠到宏和节点*
	- 但可以选中固定的节点重叠到宏或节点

# 最终效果

![change_player_contronl_and_viewBlend](img/change_player_contronl_and_viewBlend.gif)



