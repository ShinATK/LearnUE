#cg #ue4 
- [【蓝图】01课：开关门互动实现\_哔哩哔哩\_bilibili](https://www.bilibili.com/video/BV164411Y732?t=2.2&p=27)
---

目标：实现自动开关门

# 步骤一 ：给门添加碰撞体积
- 在内容包中找到门资产，将其拖拽到场景中合适的位置；
- 此时门还没有碰撞效果
- 双击门资产，打开该**静态网格体**，按照下图操作
![](img/Pasted%20image%2020240109212127.png)
- 因为要实现开关门，其实就是门绕着一个轴的旋转，所以需要将门设置为“**可移动**”
![](img/Pasted%20image%2020240109212529.png)

---
# 步骤二 ：添加盒体触发器
![](img/Pasted%20image%2020240109212309.png)
- 移动到门附近，并调整大小（下图中绿色线框即为**盒体触发器**）
![](img/Pasted%20image%2020240109212324.png)

---
# 步骤三：设置关卡蓝图
- 选中**盒体触发器**，按照下图打开**关卡蓝图**
![](img/Pasted%20image%2020240109212705.png)
为了实现开关门，首先要检测角色模型和**盒体触发器**发生**碰撞**
- 添加开始/结束碰撞的事件检测
![](img/Pasted%20image%2020240109212859.png)
![](img/Pasted%20image%2020240109212907.png)
- 获取门对象：回到场景中，选中门模型，再切回关卡蓝图，右键
![](img/Pasted%20image%2020240109213002.png)
- 设置**actor**旋转：右键->设置 Actor 旋转
![](img/Pasted%20image%2020240109213104.png)
- 完成如下链接，即可实现自动检测开门
![](img/Pasted%20image%2020240109213251.png)

# 初步效果展示

![开关门互动-初步](img/开关门互动-初步.gif)

---
# 存在问题

- 门打开后不会关闭
	- *需要在人离开后让门自动关闭*
- 门打开为瞬间实现
	- *需要设置门从开始打开到打开结束的过渡动画*

---
# 步骤四：添加时间轴

- 在蓝图中添加**时间轴**
![](img/Pasted%20image%2020240109213824.png)
![](img/Pasted%20image%2020240109213841.png)
- 双击打开，并点击*添加浮点型轨道*
	- 在表中添加关键帧
	- 在左上角设置关键帧的坐标以及横纵轴的可视区域
![](img/Pasted%20image%2020240109214011.png)
- 右键关键帧，调整曲线形状，使其自然过渡（符合从慢到快再到慢的变化）
![](img/Pasted%20image%2020240109214133.png)
- **重要！**
- 记得将时间轴上方的**长度**设置为最后一个关键帧的位置
![](img/Pasted%20image%2020240109214527.png)
- 因为要对门绕 z 轴的旋转设置该曲线，将 Rotation 分割为三个轴的三个选项
![](img/Pasted%20image%2020240109214308.png)
![](img/Pasted%20image%2020240109214337.png)

- 完成如下链接
![](img/Pasted%20image%2020240109214410.png)

# 最终效果展示

![开关门互动-添加时间轴后](img/开关门互动-添加时间轴后.gif)

---
# 存在问题

- 从反向接触**盒体触发器**门的打开方向和上方展示相同，并且打开期间会碰到人物模型而关闭
	- 根据人物接触方向，让门朝不同方向打开
	- 让门在运动过程中碰到阻碍时停住，直到阻碍消失再继续播放动画
- 想要实现一个开关门操作就需要进行一次如上的蓝图设置
	- *将上述开关门蓝图在一个 Actor 类中*，参考下一节
---

